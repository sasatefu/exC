`timescale 1ns/1ps
module tbRegSixteen;
    reg        CLK;
    reg        CLR;
    reg        R_W;
    reg        Ea;
    reg [15:0] D;
    wire [15:0] Q;
    wire [15:0] Qa;

    reg16 uut (
        .CLK(CLK),
        .CLR(CLR),
        .R_W(R_W),
        .Ea(Ea),
        .D(D),
        .Q(Q),
        .Qa(Qa)
    );

 
    always #10 CLK = ~CLK;

    initial begin
        CLK = 0;
        CLR = 0; R_W = 1; Ea = 1; D = 16'h0000;
        #25;          // 少し待ってリセット動作確認
        CLR = 1;      // リセット解除

        // 書き込み (R/W=0)
        R_W = 0; D = 16'h00AA;
        #20;          // クロック立上りで書込み

        // 読み出し保持 (R/W=1)
        R_W = 1;
        #40;

        // 別データ書き込み
        R_W = 0; D = 16'h1234;
        #20;

        // 出力禁止 Ea=0
        Ea = 0;
        #40;

        // Ea再度1に
        Ea = 1;
        #20;

        $stop;  // シミュレーション停止
    end
endmodule
